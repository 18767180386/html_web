!function(win,undefined){var c;win.console=win.console||((c={}).log=c.warn=c.debug=c.info=c.error=c.time=c.dir=c.profile=c.clear=c.exception=c.trace=c.assert=function(){},c);try{"function"!=typeof Object.assign&&(Object.assign=function(target,varArgs){if(null==target)return null;for(var to=Object(target),index=1;index<arguments.length;index++){var nextSource=arguments[index];if(null!=nextSource)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to})}catch(e){}try{Object.keys||(Object.keys=function(o){if(o===Object(o)){var p,k=[];for(p in o)Object.prototype.hasOwnProperty.call(o,p)&&k.push(p);return k}})}catch(e){}try{xhr.addEventListener&&"function"==typeof xhr.addEventListener||(xhr.addEventListener=function(type,listener){var target=this;registry.unshift([target,type,listener,function(event){event.currentTarget=target,event.preventDefault=function(){event.returnValue=!1},event.stopPropagation=function(){event.cancelBubble=!0},event.target=event.srcElement||target,listener.call(target,event)}]),this.attachEvent("on"+type,registry[0][3])},xhr.dispatchEvent=function(eventObject){return this.fireEvent("on"+eventObject.type,eventObject)})}catch(e){}try{(tld=win.location.host.split(".").reverse())[0]=tld[0].split(":")[0],tld="com"===tld[1]?"."+tld[2]+"."+tld[1]+"."+tld[0]:tld[1]?-1<parseInt(tld[0])&&-1<parseInt(tld[1])?"":"."+tld[1]+"."+tld[0]:tld[0]}catch(e){var tld=""}win.rprm={compress:function(input){try{if(null==input)return"";return function(uncompressed,bitsPerChar,getCharFromInt){if(null==uncompressed)return"";var i,value,ii,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0;for(ii=0;ii<uncompressed.length;ii+=1)if(context_c=uncompressed.charAt(ii),Object.prototype.hasOwnProperty.call(context_dictionary,context_c)||(context_dictionary[context_c]=context_dictSize++,context_dictionaryToCreate[context_c]=!0),context_wc=context_w+context_c,Object.prototype.hasOwnProperty.call(context_dictionary,context_wc))context_w=context_wc;else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;for(value=context_w.charCodeAt(0),i=0;i<8;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{for(value=1,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;for(value=context_w.charCodeAt(0),i=0;i<16;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),delete context_dictionaryToCreate[context_w]}else for(value=context_dictionary[context_w],i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),context_dictionary[context_wc]=context_dictSize++,context_w=String(context_c)}if(""!==context_w){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++)context_data_val<<=1,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++;for(value=context_w.charCodeAt(0),i=0;i<8;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}else{for(value=1,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value=0;for(value=context_w.charCodeAt(0),i=0;i<16;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1}0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++),delete context_dictionaryToCreate[context_w]}else for(value=context_dictionary[context_w],i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;0==--context_enlargeIn&&(context_enlargeIn=Math.pow(2,context_numBits),context_numBits++)}for(value=2,i=0;i<context_numBits;i++)context_data_val=context_data_val<<1|1&value,context_data_position==bitsPerChar-1?(context_data_position=0,context_data.push(getCharFromInt(context_data_val)),context_data_val=0):context_data_position++,value>>=1;for(;;){if(context_data_val<<=1,context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}context_data_position++}return context_data.join("")}(input,6,function(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(a)})}catch(e){return input}},getCookie:function(cname){for(var name=cname+"=",ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},init:function(obj){try{if("object"==typeof obj){obj.appName&&(rprm.appName=obj.appName),obj.statType&&(rprm.statType=obj.statType);try{"dev"!==obj.env&&"development"!==obj.env&&"localhost"!==obj.env&&"local"!==obj.env||(rprm.recAPI="//mobileapm-pl.weimob.com/postFrontEndData",rprm.ancAPI="//statistic-dev.weimobdc.com/wm.css",rprm.trackAPI="//mapi-dev.weimob.com/fe/mapi/user/actionsAdd",!0===obj.debug&&(rprm.dev=!0)),"qa"!==obj.env&&"test"!==obj.env&&"testing"!==obj.env&&-1===obj.env.indexOf("quality")&&-1===obj.env.indexOf("assurance")&&-1===obj.env.indexOf("internal")||(rprm.recAPI="//mobileapm-pl.weimob.com/postFrontEndData",rprm.ancAPI="//statistic-qa.weimobdc.com/wm.css",rprm.trackAPI="//mapi.weimobqa.com/fe/mapi/user/actionsAdd",!0===obj.debug&&(rprm.dev=!0)),"pl"!==obj.env&&"pre-production"!==obj.env&&"preproduction"!==obj.env&&"pre_production"!==obj.env&&"stage"!==obj.env&&"staging"!==obj.env&&-1===obj.env.indexOf("external")||(rprm.recAPI="//mobileapm-pl.weimob.com/postFrontEndData",rprm.ancAPI="//statistic-qa.weimobdc.com/wm.css",rprm.trackAPI="//mapi-pl.weimob.com/fe/mapi/user/actionsAdd"),"production"!==obj.env&&"live"!==obj.env||(rprm.recAPI="//mobileapm.weimob.com/postFrontEndData",rprm.ancAPI="//statistic.weimobdc.com/wm.css",rprm.trackAPI="//mapi.weimob.com/fe/mapi/user/actionsAdd")}catch(e){}obj.recAPI&&(rprm.recAPI=obj.recAPI),obj.ancAPI&&(rprm.ancAPI=obj.ancAPI),obj.trackAPI&&(rprm.trackAPI=obj.trackAPI),!1===obj.runtime&&(rprm.recAPI=!1,rprm.risSending=!0),!1===obj.anchor&&(rprm.ancAPI=!1,rprm.isSending=!0),obj.rretry&&(rprm.rretry=obj.rretry),obj.retry&&(rprm.retry=obj.retry),obj.count&&(rprm.count=obj.count),obj.len&&(rprm.len=obj.len),obj.rfrequency&&(rprm.rfrequency=obj.rfrequency),obj.frequency&&(rprm.frequency=obj.frequency),obj.public&&"object"==typeof obj.public&&rprm.public(obj.public),void 0!==obj.RLZ&&(rprm.RLZ=obj.RLZ),void 0!==obj.LZ&&(rprm.LZ=obj.LZ);try{localStorage.removeItem("rprm_vars")}catch(e){}try{var href=win.location.href,mjcinfo=rprm.getCookie("rprm_mjcinfo")||"NA";if(-1!==href.indexOf("__mjcinfo="))mjcinfo=href.slice(href.indexOf("__mjcinfo=")+10);else if("string"==typeof document.referrer){-1!==(referrer=document.referrer).indexOf("__mjcinfo=")&&(mjcinfo=referrer.slice(referrer.indexOf("__mjcinfo=")+10))}rprm.mjcinfo=function(mjcinfo){try{return-1!==mjcinfo.indexOf("&")&&(mjcinfo=mjcinfo.slice(0,mjcinfo.indexOf("&"))),-1!==mjcinfo.indexOf("#")&&(mjcinfo=mjcinfo.slice(0,mjcinfo.indexOf("#"))),document.cookie="rprm_mjcinfo="+mjcinfo+";domain="+tld+";path=/;expires="+new Date((new Date).setMonth((new Date).getMonth()+1)).toGMTString(),mjcinfo}catch(e){return"NA"}}(mjcinfo)||"NA"}catch(e){rprm.mjcinfo="Not_Supported"}try{href=win.location.href.toLowerCase();var csource=rprm.getCookie("rprm_csource")||"NA";if(-1!==href.indexOf("channelsource="))csource=href.slice(href.indexOf("channelsource=")+14);else if(-1!==href.indexOf("csource="))csource=href.slice(href.indexOf("csource=")+8);else if("string"==typeof document.referrer){-1!==(referrer=document.referrer.toLowerCase()).indexOf("channelsource=")?csource=referrer.slice(referrer.indexOf("channelsource=")+14):-1!==referrer.indexOf("csource=")&&(csource=referrer.slice(referrer.indexOf("csource=")+8))}rprm.csource=function(csource){try{return-1!==csource.indexOf("&")&&(csource=csource.slice(0,csource.indexOf("&"))),-1!==csource.indexOf("#")&&(csource=csource.slice(0,csource.indexOf("#"))),document.cookie="rprm_csource="+csource+";domain="+tld+";path=/;expires="+new Date((new Date).setMonth((new Date).getMonth()+1)).toGMTString(),csource}catch(e){return"NA"}}(csource)||"NA"}catch(e){rprm.csource="Not_Supported"}try{href=win.location.href.toLowerCase();var tracepid=rprm.getCookie("rprm_tracepid")||"NA";if(-1!==href.indexOf("tracepromotionid="))tracepid=href.slice(href.indexOf("tracepromotionid=")+17);else if("string"==typeof document.referrer){var referrer;-1!==(referrer=document.referrer.toLowerCase()).indexOf("tracepromotionid=")&&(tracepid=referrer.slice(referrer.indexOf("tracepromotionid=")+17))}rprm.tracepid=function(tracepid){try{return-1!==tracepid.indexOf("&")&&(tracepid=tracepid.slice(0,tracepid.indexOf("&"))),-1!==tracepid.indexOf("#")&&(tracepid=tracepid.slice(0,tracepid.indexOf("#"))),document.cookie="rprm_tracepid="+tracepid+";domain="+tld+";path=/;expires="+new Date(Date.now()+288e5).toGMTString(),tracepid}catch(e){return"NA"}}(tracepid)||"NA"}catch(e){rprm.tracepid="Not_Supported"}try{if(rprm.cuid=rprm.getCookie("rprm_cuid"),!rprm.cuid){function btoa(input){for(var block,charCode,str=String(input),idx=0,map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",output="";str.charAt(0|idx)||(map="=",idx%1);output+=map.charAt(63&block>>8-idx%1*8))(charCode=str.charCodeAt(idx+=.75))<255&&(block=block<<8|charCode);return output}rprm.cuid=btoa(Date.now()).slice(0,16),document.cookie="rprm_cuid="+rprm.cuid+";domain="+tld+";path=/;expires="+new Date((new Date).setYear((new Date).getYear()+1905)).toGMTString()}}catch(e){rprm.cuid=Date.now()}try{var tracepromotion=localStorage.getItem("rprm_tracepromotion");"object"==typeof(tracepromotion=JSON.parse(tracepromotion))&&"number"==typeof tracepromotion.update&&"object"==typeof tracepromotion.obj&&(Date.now()-tracepromotion.update<288e5?rprm.vars=Object.assign({},rprm.vars,tracepromotion.obj):localStorage.removeItem("rprm_tracepromotion"))}catch(e){}if(rprm.rtimer=setInterval(function(){rprm.rsend()},rprm.rfrequency),rprm.timer=setInterval(function(){rprm.send()},rprm.frequency),!win.addEventListener&&(WindowPrototype=win.prototype,DocumentPrototype=HTMLDocument.prototype,ElementPrototype=Element.prototype,registry=[],WindowPrototype.addEventListener=DocumentPrototype.addEventListener=ElementPrototype.addEventListener=function(type,listener){var target=this;registry.unshift([target,type,listener,function(event){event.currentTarget=target,event.preventDefault=function(){event.returnValue=!1},event.stopPropagation=function(){event.cancelBubble=!0},event.target=event.srcElement||target,listener.call(target,event)}]),this.attachEvent("on"+type,registry[0][3])},WindowPrototype.removeEventListener=DocumentPrototype.removeEventListener=ElementPrototype.removeEventListener=function(type,listener){for(var index=0;null==registry[index];++index)if((void 0)[0]==this&&(void 0)[1]==type&&(void 0)[2]==listener)return this.detachEvent("on"+type,registry.splice(index,1)[0][3])},WindowPrototype.dispatchEvent=DocumentPrototype.dispatchEvent=ElementPrototype.dispatchEvent=function(eventObject){return this.fireEvent("on"+eventObject.type,eventObject)}),!1!==obj.runtime){if(rprm.hasLoaded||"complete"!==document.readyState||(win.performance&&win.performance.timing?rprm.pTime():rprm.pError({detail:"浏览器不支持效率工具 UA= "+navigator.userAgent})),"XMLHttpRequest"in win){var xhrproto=XMLHttpRequest.prototype;rprm.fill(xhrproto,"open",function(origOpen){return function(method,url){if("string"==typeof url||url instanceof String)return url===rprm.recAPI&&-1!==url.indexOf(rprm.ancAPI)||(this.rprm_xhr={url:url,startTime:Date.now()}),origOpen.apply(this,arguments)}},[]),rprm.fill(xhrproto,"send",function(origSend){return function(data){var xhr=this;function onreadystatechangeHandler(){if(xhr.rprm_xhr&&4===xhr.readyState&&(200===xhr.status?xhr.rprm_xhr.state=0:xhr.rprm_xhr.state=xhr.status,xhr.rprm_xhr.url!==rprm.recAPI&&-1===xhr.rprm_xhr.url.indexOf(rprm.ancAPI))){var globalticket="does not exist";if(200===xhr.status){var headers=xhr.getAllResponseHeaders(),a=/globalticket: (.*)\w/.exec(headers);a&&a[1]&&(globalticket=a[1])}rprm.pAjax({url:xhr.rprm_xhr.url,globalticket:globalticket,endTime:Date.now(),startTime:xhr.rprm_xhr.startTime,state:xhr.rprm_xhr.state})}}return"onreadystatechange"in xhr&&"function"==typeof xhr.onreadystatechange?rprm.fill(xhr,"onreadystatechange",function(orig){if(rprm.isWrapped=!1)return orig;function wrapped(){onreadystatechangeHandler.apply(this,arguments);try{return orig.apply(this,arguments)}catch(e){throw e}}for(var property in orig)Object.prototype.hasOwnProperty.call(orig,property)&&(wrapped[property]=orig[property]);return rprm.isWrapped=!0,wrapped}):xhr.onreadystatechange=onreadystatechangeHandler,origSend.apply(this,arguments)}},[])}"fetch"in win&&rprm.fill(win,"fetch",function(origFetch){return function(fn,t){for(var startTime=Date.now(),args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];var url,fetchInput=args[0],method="GET";"string"==typeof fetchInput?url=fetchInput:(url=fetchInput.url,fetchInput.method&&(method=fetchInput.method)),args[1]&&args[1].method&&(method=args[1].method);var fetchData={startTime:startTime,method:method,url:url,status_code:null};return origFetch.apply(this,args).then(function(response){var globalticket="does not exist";return 200===response.status?(fetchData.status_code=0,globalticket=response.headers.get("globalticket")||"does not exist"):fetchData.status_code=response.status,url!==rprm.recAPI&&-1===url.indexOf(rprm.ancAPI)&&rprm.pAjax({url:fetchData.url,globalticket:globalticket,endTime:Date.now(),startTime:fetchData.startTime,state:fetchData.status_code}),response})}},[]),win.performance&&win.performance.timing?win.addEventListener("load",function(){rprm.pTime()}):rprm.pError({detail:"浏览器不支持效率工具 UA= "+navigator.userAgent}),win.addEventListener("error",function(err){rprm.pError({detail:err.message})})}if(!1!==obj.anchor){var tempua=navigator.userAgent;if("string"==typeof tempua&&(tempua=(tempua=tempua.slice(tempua.indexOf("(")+1,tempua.indexOf(")"))).split("; ")),"object"==typeof tempua){var newdata={model:tempua[0],system:tempua[1],platform:navigator.platform,language:navigator.language};rprm.rec({appShow:Date.now()}),rprm.systemInfo=newdata}if("function"==typeof win.onbeforeunload){var origonbeforeunload=win.onbeforeunload;win.onbeforeunload=function(){rprm.rec({appHide:Date.now()}),rprm.send(),rprm.rsend(),origonbeforeunload.apply(origonbeforeunload,arguments)}}else win.onbeforeunload=function(){rprm.rec({appHide:Date.now()}),rprm.send(),rprm.rsend()};if(navigator.geolocation&&obj.geo){navigator.geolocation.getCurrentPosition(function(position){var newdata={latitude:position.coords.latitude,longitude:position.coords.longitude};rprm.rec(newdata),rprm.geoInfo=position.coords})}}}else console.log("初始化失败，入参必须是对象")}catch(e){console.log("初始化失败",e)}var WindowPrototype,DocumentPrototype,ElementPrototype,registry},pTime:function(){var t=win.performance.timing,data={};data.navigationStart=t.navigationStart,data.unloadEventStart=t.unloadEventStart,data.unloadEventEnd=t.unloadEventEnd,data.redirectStart=t.redirectStart,data.redirectEnd=t.redirectEnd,data.fetchStart=t.fetchStart,data.domainLookupStart=t.domainLookupStart,data.domainLookupEnd=t.domainLookupEnd,data.connectStart=t.connectStart,data.connectEnd=t.connectEnd,data.secureConnectionStart=t.secureConnectionStart,data.requestStart=t.requestStart,data.responseStart=t.responseStart,data.responseEnd=t.responseEnd,data.domLoading=t.domLoading,data.domInteractive=t.domInteractive,data.domContentLoadedEventStart=t.domContentLoadedEventStart,data.domContentLoadedEventEnd=t.domContentLoadedEventEnd,data.domComplete=t.domComplete,data.loadEventStart=t.loadEventStart,data.loadEventEnd=t.loadEventEnd,rprm.rpush("time",data),rprm.hasLoaded=!0},pAjax:function(obj){rprm.rpush("ajax",{url:obj.url,globalticket:obj.globalticket,endTime:obj.endTime,startTime:obj.startTime,state:obj.state,cTime:Date.now()})},pError:function(obj){rprm.rpush("error",{module:rprm.appName,message:(obj.message||obj.detail).slice(0,20)+"...",detail:obj.detail,cTime:Date.now()})},push:function(data){try{var tempdata=localStorage.getItem("rprm");tempdata=tempdata?tempdata+"#"+data:data,localStorage.setItem("rprm",tempdata),tempdata.length>rprm.len&&(rprm.dev&&console.log("打点数据长度超过阀值，准备发送"),rprm.send())}catch(e){rprm.pushdata?rprm.pushdata=rprm.pushdata+"#"+data:rprm.pushdata=data,rprm.pushdata.length>rprm.len&&(rprm.dev&&console.log("打点数据长度超过阀值，准备发送"),rprm.send())}},pv:function(data){var compressed=!1;try{if(!rprm.LZ)throw"e";rprm.dev&&console.log("RPRM尝试压缩PV打点数据：",data);compressed="StatType=e&c="+rprm.compress(data)}catch(e){rprm.dev&&console.log("RPRM准备发送PV打点数据：",data);compressed=data}if(!1!==compressed){var link=document.createElement("link"),target=document.getElementsByTagName("head")[0];target||(target=document.getElementsByTagName("body")[0]),link.rel="stylesheet",link.href=rprm.ancAPI+"?"+compressed,target.appendChild(link)}},send:function(){if(rprm.isSending)rprm.dev&&console.log("列队等待下一次打点");else{if(rprm.pushdata)var tempdata=rprm.pushdata;else tempdata=localStorage.getItem("rprm");if(void 0!==tempdata&&tempdata.length<1)return;if(rprm.retry<1)return rprm.dev&&console.log("打点接口出错，请通知接口管理员"),void clearInterval(rprm.timer);if(rprm.currentTime=Date.now(),rprm.currentTime-rprm.lastTime<1e3)return void(rprm.dev&&console.log("打点请求过频"));if(rprm.lastTime=rprm.currentTime,rprm.isSending=!0,rprm.LZ){rprm.dev&&console.log("RPRM尝试压缩打点数据：",tempdata);var compressed="StatType=e&c="+rprm.compress(tempdata)}else{rprm.dev&&console.log("RPRM准备发送打点数据：",tempdata);compressed=tempdata}var xhr=new XMLHttpRequest;try{xhr.addEventListener("load",reqListener)}catch(e){}try{xhr.addEventListener("timeout",reqListener)}catch(e){}try{xhr.addEventListener("error",reqListener,!1)}catch(e){}try{xhr.addEventListener("abort",reqListener,!1)}catch(e){}xhr.open("GET",rprm.ancAPI+"?"+compressed);try{xhr.timeout=5e3}catch(e){}function reqListener(){if(rprm.dev&&console.log("打点服务器返回了："+xhr.responseText),rprm.isSending=!1,200===xhr.status){rprm.dev&&console.log("打点成功了");tempdata.length;if(rprm.pushdata)rprm.pushdata=rprm.pushdata.substring(tempdata.length);else{var currentdata=localStorage.getItem("rprm");localStorage.setItem("rprm",currentdata.substring(tempdata.length))}}else!function(){rprm.dev&&console.log("打点失败了");rprm.retry--;var currentdata=localStorage.getItem("rprm");if(16384<currentdata.length)if(rprm.dev&&console.log("失败次数太多抛弃部分数据"),rprm.pushdata)rprm.pushdata=rprm.pushdata.substring(tempdata.length);else{tempdata.length;localStorage.setItem("rprm",currentdata.substring(tempdata.length))}}()}xhr.setRequestHeader("Accept","text/css"),xhr.setRequestHeader("Content-Type","text/plain"),xhr.send()}},rpush:function(type,data){var item={};item.id=rprm.dataId+"-"+rprm.dataIndex,rprm.dataIndex++,item.type=type,item.cTime=Date.now(),item.data=data;try{var tempdata=localStorage.getItem("rprm_obj");tempdata&&0<tempdata.length?(tempdata=JSON.parse(tempdata)).push(item):tempdata=[item],localStorage.setItem("rprm_obj",JSON.stringify(tempdata)),tempdata.length>rprm.count&&(rprm.dev&&console.log("调用链数据长度超过阀值，准备发送"),rprm.rsend())}catch(e){rprm.rpushdata&&0!=rprm.rpushdata.length?rprm.rpushdata.push(item):rprm.rpushdata=[item],rprm.rpushdata.length>rprm.count&&(rprm.dev&&console.log("调用链数据长度超过阀值，准备发送"),rprm.rsend())}},rsend:function(){if(rprm.risSending)rprm.dev&&console.log("列队等待下一次调用链记录");else{if(rprm.rpushdata)var tempdata=rprm.rpushdata;else{tempdata=localStorage.getItem("rprm_obj");tempdata=JSON.parse(tempdata)}if(tempdata&&tempdata.length<3)return;if(rprm.rretry<1)return rprm.dev&&console.log("调用链接口出错，请通知接口管理员"),void clearInterval(rprm.rtimer);if(rprm.rcurrentTime=Date.now(),rprm.rcurrentTime-rprm.rlastTime<1e3)return void(rprm.dev&&console.log("调用链请求过频"));rprm.rlastTime=rprm.rcurrentTime,rprm.risSending=!0;var newdata={id:rprm.dataId,page:win.location.href,appName:rprm.appName,pageName:document.title,cuid:rprm.cuid,ua:rprm.ua,abandon:Math.max(0,tempdata.length-2*rprm.count),cTime:Date.now(),perfs:tempdata.slice(0,2*rprm.count)};if(rprm.RLZ){rprm.dev&&console.log("RPRM尝试压缩调用链数据：",newdata);var compressed=JSON.stringify({compressed:rprm.compress(JSON.stringify(newdata))})}else{rprm.dev&&console.log("RPRM准备发送调用链数据：",newdata);compressed=JSON.stringify(newdata)}var xhr=new XMLHttpRequest;try{xhr.addEventListener("load",reqListener)}catch(e){}try{xhr.addEventListener("timeout",reqListener)}catch(e){}try{xhr.addEventListener("error",reqListener,!1)}catch(e){}try{xhr.addEventListener("abort",reqListener,!1)}catch(e){}xhr.open("POST",rprm.recAPI);try{xhr.timeout=5e3}catch(e){}function reqListener(){if(rprm.dev&&console.log("调用链服务器返回了："+xhr.responseText),rprm.risSending=!1,200===xhr.status)if(rprm.rpushdata)rprm.rpushdata=rprm.rpushdata.slice(2*rprm.count,rprm.rpushdata.length);else{var currentdata=localStorage.getItem("rprm_obj");currentdata=JSON.parse(currentdata),localStorage.setItem("rprm_obj",JSON.stringify(currentdata.slice(2*rprm.count,currentdata.length)))}else!function(){rprm.rretry--;var currentdata=localStorage.getItem("rprm_obj"),currentdatastr=currentdata;currentdata=JSON.parse(currentdata),16384<currentdatastr.length&&(rprm.dev&&console.log("调用链失败次数太多抛弃部分数据"),rprm.rpushdata?rprm.rpushdata=rprm.rpushdata.slice(rprm.count,rprm.rpushdata.length):localStorage.setItem("rprm_obj",JSON.stringify(currentdata.slice(rprm.count,currentdata.length))))}()}xhr.setRequestHeader("Accept","*/*"),xhr.setRequestHeader("Content-Type","text/plain"),xhr.send(compressed)}},fill:function(obj,name,replacement,track){var orig=obj[name];obj[name]=replacement(orig),track&&track.push([obj,name,orig])},rec:function(obj){try{if(!1===rprm.ancAPI)return void(rprm.dev&&console.log("打点被设为关闭, 不记录打点信息:",obj));if("object"==typeof obj){var pv=!1;if("string"==typeof document.referrer)var referrer=document.referrer||"NA";else referrer="Not_Supported";var newrec="StatType="+rprm.statType+"&timestamp="+Date.now()+"&url="+encodeURIComponent(win.location.href)+"&ua="+encodeURIComponent(rprm.ua)+"&referrer="+encodeURIComponent(referrer)+"&csource="+(encodeURIComponent(rprm.csource)||rprm.getCookie("rprm_csource")||"NA")+"&mjcinfo="+(encodeURIComponent(rprm.mjcinfo)||rprm.getCookie("rprm_mjcinfo")||"NA")+"&tracepromotionid="+(encodeURIComponent(rprm.tracepid)||rprm.getCookie("rprm_tracepid")||"NA")+"&cuid="+rprm.cuid+"&v="+rprm.v;obj=Object.assign({},rprm.vars,obj),Object.keys(obj).forEach(function(key){var lowerkey=key;try{lowerkey=key.toLowerCase()}catch(e){}"stattype"!==lowerkey&&"timestamp"!==lowerkey&&"url"!==lowerkey&&"ua"!==lowerkey&&"csource"!==lowerkey&&"cuid"!==lowerkey&&"v"!==lowerkey&&(newrec=newrec+"&"+encodeURIComponent(key)+"="+encodeURIComponent(obj[key])),("appShow"===key||"elementid"===lowerkey&&"pv"===obj[key].toLowerCase())&&(pv=!0)}),!0===pv?rprm.pv(newrec):rprm.push(newrec)}else rprm.dev&&console.log("rprm.rec 的入参必须是对象")}catch(e){}},public:function(obj,type){if(obj&&"object"==typeof obj)if("new"===type)try{rprm.vars=Object.assign({},rprm.vars,obj)}catch(e){rprm.vars=obj}else rprm.vars=obj},addScript:function(filepath,callback){if(filepath){var fileref=document.createElement("script"),done=!1,head=document.getElementsByTagName("head")[0];fileref.onload=fileref.onreadystatechange=function(){done||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(done=!0,callback(),fileref.onload=fileref.onreadystatechange=null,head&&fileref.parentNode&&head.removeChild(fileref))},fileref.setAttribute("type","text/javascript"),fileref.setAttribute("src",filepath),head.appendChild(fileref)}},tracepromotion:function(obj){if("object"==typeof obj&&obj instanceof Array==!1){rprm.vars=Object.assign({},rprm.vars,obj);var tracepromotion={update:Date.now(),obj:obj};localStorage.setItem("rprm_tracepromotion",JSON.stringify(tracepromotion))}},actionsadd:function(opts){if("object"!=typeof opts)return console.log("actionsadd的入参必须是对象"),!1;var obj={};if(opts.authorizerAppId)obj.authorizerAppId=opts.authorizerAppId;else{if(!opts.pid)return console.log("actionsadd的入参必须带有authorizerAppId或pid"),!1;obj.pid=opts.pid}if("object"!=typeof opts.action)try{opts.action=JSON.parse(opts.action)}catch(e){}if("object"!=typeof opts.action)return console.log("actionsadd的入参必须带有action(对象或者可以parse为对象的字符串)"),!1;if("string"!=typeof opts.action.actionType)return console.log("actionsadd的入参必须带有action.actionType(字符串)"),!1;if("string"!=typeof opts.action.actionType)return console.log("actionsadd的入参必须带有action.actionType(字符串)"),!1;if(obj.action=opts.action,"object"!=typeof opts.action.trace&&(obj.action.trace={}),!rprm.gdtvid)return console.log("actionsadd取消 - 未获取广告traceid"),!1;obj.action.trace.clickId=rprm.gdtvid,obj.action.url||(obj.action.url=win.location.href);var xhr=new XMLHttpRequest;try{xhr.addEventListener("load",reqListener)}catch(e){}try{xhr.addEventListener("timeout",reqListener)}catch(e){}try{xhr.addEventListener("error",reqListener,!1)}catch(e){}try{xhr.addEventListener("abort",reqListener,!1)}catch(e){}xhr.open("POST",rprm.trackAPI);try{xhr.timeout=5e3}catch(e){}function reqListener(){if(200===xhr.status)try{if("0"!=JSON.parse(xhr.responseText).errcode)throw"短路"}catch(e){reqError()}else reqError()}function reqError(){console.log("上报服务器返回了："+xhr.responseText)}xhr.setRequestHeader("Accept","*/*"),xhr.setRequestHeader("Content-Type","application/json"),xhr.send(JSON.stringify(obj))},vars:{},isWrapped:!1,recAPI:"//mobileapm.weimob.com/postFrontEndData",ancAPI:"//statistic.weimobdc.com/wm.css",trackAPI:"//mapi.weimob.com/fe/mapi/user/actionsAdd",appName:"hello",statType:"world",pageName:null,dataId:Math.random().toString(32).slice(-10),dataIndex:1e3,timer:null,rtimer:null,isSending:!1,risSending:!1,retry:5,rretry:5,count:80,len:8192,frequency:6e4,rfrequency:6e4,lastTime:0,currentTime:0,rlastTime:0,rcurrentTime:0,hasLoaded:!1,ua:navigator.userAgent,ref:!1,dev:!1,LZ:!0,RLZ:!0,systemInfo:null,geoInfo:null,v:"h5-65"};try{var href=win.location.href.toLowerCase(),gdtvid=win.rprm.getCookie("rprm_gdtvid");if(-1!==href.indexOf("gdt_vid="))gdtvid=href.slice(href.indexOf("gdt_vid=")+8);else if("string"==typeof document.referrer){var referrer=document.referrer.toLowerCase();-1!==referrer.indexOf("gdt_vid=")&&(gdtvid=referrer.slice(referrer.indexOf("gdt_vid=")+8))}win.rprm.gdtvid=function(gdtvid){try{return-1!==gdtvid.indexOf("&")&&(gdtvid=gdtvid.slice(0,gdtvid.indexOf("&"))),-1!==gdtvid.indexOf("#")&&(gdtvid=gdtvid.slice(0,gdtvid.indexOf("#"))),document.cookie="rprm_gdtvid="+gdtvid+";domain="+tld+";path=/;expires="+new Date(Date.now()+36e5).toGMTString(),gdtvid}catch(e){return!1}}(gdtvid)}catch(e){win.rprm.gdtvid=!1}}(window||global||self||{}),"function"==typeof define&&define.amd?define(function(){return rprm}):"undefined"!=typeof module&&null!=module&&(module.exports=rprm);